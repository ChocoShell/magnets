// Generated by CoffeeScript 1.3.3
(function() {
  var cached, hold, sendUpdate;

  hold = $("#hold");

  cached = {};

  /*
  ---   sends an update to the server to distribute to the clients
  */


  sendUpdate = function(e) {
    var params;
    params = {
      word: $(e.target).data('word'),
      offset: $(e.target).offset(),
      position: $(e.target).position()
    };
    return socket.emit('update', params);
  };

  /*
  ---    Listen for pieces moving
  */


  socket.on('pieceMoved', function(data) {
    var selector;
    selector = cached[data.word] || (function() {
      cached[data.word] = $("[data-word='" + data.word + "']");
      return cached[data.word];
    })();
    return selector.offset(data.offset).css({
      "z-index": 999
    });
  });

  $(function() {
    return $(".magnet").draggable({
      drag: sendUpdate,
      stop: sendUpdate
    });
  });

}).call(this);
